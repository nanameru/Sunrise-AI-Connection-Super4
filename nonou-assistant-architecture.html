<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–¶è¾²ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        .mermaid {
            text-align: center;
            background-color: #fafafa;
            padding: 20px;
            border-radius: 8px;
        }
        .tech-note {
            margin-top: 20px;
            padding: 15px;
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            border-radius: 4px;
        }
        .tech-note h3 {
            margin-top: 0;
            color: #1976d2;
        }
        .agent-tools {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .agent-card {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .agent-card h4 {
            margin-top: 0;
            color: #9c27b0;
        }
        .agent-card ul {
            margin: 10px 0;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å–¶è¾²ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ»ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h1>
        <p class="subtitle">ã€œMastraãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æ´»ç”¨ã—ãŸAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹è¾²æ¥­æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã€œ</p>
        
        <div class="mermaid">
graph TB
    subgraph "Users"
        USER[fa:fa-users ãƒ¦ãƒ¼ã‚¶ãƒ¼<br/>éƒ½å¸‚éƒ¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»åœ°æ–¹è¾²å®¶ãƒ»è¾²æ¥­æ³•äºº]
    end
    
    subgraph "AWS Cloud"
        subgraph "Region ap-northeast-1"
            subgraph "VPC"
                subgraph "Public Subnet"
                    ALB[fa:fa-sitemap Application Load Balancer]
                    APIGW[fa:fa-cloud API Gateway]
                end
                
                subgraph "Private Subnet - Application Layer"
                    LAMBDA[fa:fa-code Lambda Functions<br/>ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å‡¦ç†]
                    STEP[fa:fa-tasks Step Functions<br/>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡]
                    
                    subgraph "Mastra Framework"
                        MASTRA[fa:fa-robot Mastra<br/>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯]
                        
                        subgraph "Agent 1: ç©ºãå®¶ãƒ»æ°‘æ³Šã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼"
                            AGENT1[fa:fa-home Agent 1]
                            TOOL1A[fa:fa-search ç‰©ä»¶æ¤œç´¢ãƒ„ãƒ¼ãƒ«]
                            TOOL1B[fa:fa-map åœ°åŸŸæƒ…å ±åé›†ãƒ„ãƒ¼ãƒ«]
                            TOOL1C[fa:fa-calculator ä¾¡æ ¼åˆ†æãƒ„ãƒ¼ãƒ«]
                        end
                        
                        subgraph "Agent 2: è£œåŠ©é‡‘ãƒ»åŠ©æˆé‡‘ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼"
                            AGENT2[fa:fa-money Agent 2]
                            TOOL2A[fa:fa-university è£œåŠ©é‡‘æ¤œç´¢ãƒ„ãƒ¼ãƒ«]
                            TOOL2B[fa:fa-calendar ç”³è«‹æœŸé™ç®¡ç†ãƒ„ãƒ¼ãƒ«]
                            TOOL2C[fa:fa-file-text ç”³è«‹æ›¸ä½œæˆãƒ„ãƒ¼ãƒ«]
                        end
                        
                        subgraph "Agent 3: Agri-Pitch AI"
                            AGENT3[fa:fa-chart-line Agent 3]
                            TOOL3A[fa:fa-chart-bar å¸‚å ´åˆ†æãƒ„ãƒ¼ãƒ«]
                            TOOL3B[fa:fa-paint-brush ã‚¹ãƒ©ã‚¤ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«]
                            TOOL3C[fa:fa-bullhorn ãƒ—ãƒ¬ã‚¼ãƒ³æœ€é©åŒ–ãƒ„ãƒ¼ãƒ«]
                        end
                    end
                end
                
                subgraph "Private Subnet - AI/ML Layer"
                    BEDROCK[fa:fa-brain Amazon Bedrock<br/>Claude Opus 4]
                end
                
                subgraph "Private Subnet - Data Layer"
                    DYNAMO[fa:fa-database DynamoDB<br/>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ»è¾²æ¥­ãƒ‡ãƒ¼ã‚¿]
                    S3[fa:fa-archive S3<br/>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ç”»åƒä¿å­˜]
                end
            end
        end
        
        subgraph "External Services"
            LINE[fa:fa-comment LINE Messaging API]
            WEATHER[fa:fa-cloud-sun æ°—è±¡API]
            GRANTS[fa:fa-university J-Grants API]
            MARKET[fa:fa-shopping-cart ECãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ]
            PROPERTY[fa:fa-home ä¸å‹•ç”£ã‚µã‚¤ãƒˆ]
            CANVA[fa:fa-paint-brush Canva API]
            GSLIDES[fa:fa-file-powerpoint Google Slides API]
        end
    end
    
    subgraph "Generated Outputs"
        OUT1[fa:fa-calendar å¹´é–“ä½œä»˜è¨ˆç”»<br/>åæ”¯è©¦ç®—æ›¸]
        OUT2[fa:fa-file-text è¾²åœ°æ‰‹ç¶šãæ›¸é¡<br/>ç”³è«‹æ›¸é¡ä¸€å¼]
        OUT3[fa:fa-list è£œåŠ©é‡‘ãƒªã‚¹ãƒˆ<br/>ç”³è«‹ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³]
        OUT4[fa:fa-users äººå“¡è¨ˆç”»<br/>ä½œæ¥­å‰²å½“è¡¨]
        OUT5[fa:fa-book æ¥­å‹™ãƒãƒ‹ãƒ¥ã‚¢ãƒ«<br/>ä½œæ¥­æ‰‹é †æ›¸]
        OUT6[fa:fa-home ç§»ä½æº–å‚™ã‚µãƒãƒ¼ãƒˆ<br/>ç‰©ä»¶ãƒ»äº¤é€šæƒ…å ±]
        OUT7[fa:fa-presentation è²©è·¯æ‹¡å¤§ãƒ—ãƒ¬ã‚¼ãƒ³<br/>ã‚¹ãƒ©ã‚¤ãƒ‰è³‡æ–™]
    end
    
    %% ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼
    USER -->|å…¥åŠ›: æ ½åŸ¹å“ç›®ãƒ»æ—¥å ±| ALB
    ALB --> APIGW
    APIGW --> LAMBDA
    LAMBDA --> STEP
    STEP --> MASTRA
    
    %% Mastraå†…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¶å¾¡
    MASTRA ==> AGENT1
    MASTRA ==> AGENT2
    MASTRA ==> AGENT3
    
    %% Agent 1ã®ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
    AGENT1 --> TOOL1A
    AGENT1 --> TOOL1B
    AGENT1 --> TOOL1C
    TOOL1A -.->|API| PROPERTY
    TOOL1B -.->|API| WEATHER
    
    %% Agent 2ã®ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
    AGENT2 --> TOOL2A
    AGENT2 --> TOOL2B
    AGENT2 --> TOOL2C
    TOOL2A -.->|API| GRANTS
    
    %% Agent 3ã®ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
    AGENT3 --> TOOL3A
    AGENT3 --> TOOL3B
    AGENT3 --> TOOL3C
    TOOL3A -.->|API| MARKET
    TOOL3B -.->|API| CANVA
    TOOL3B -.->|API| GSLIDES
    
    %% AIå‡¦ç†
    AGENT1 --> BEDROCK
    AGENT2 --> BEDROCK
    AGENT3 --> BEDROCK
    
    %% ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    BEDROCK --> DYNAMO
    BEDROCK --> S3
    
    %% ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆç”Ÿæˆ
    TOOL1A --> OUT6
    TOOL1B --> OUT6
    TOOL1C --> OUT6
    
    TOOL2A --> OUT3
    TOOL2B --> OUT3
    TOOL2C --> OUT2
    
    TOOL3A --> OUT1
    TOOL3B --> OUT7
    TOOL3C --> OUT7
    
    MASTRA --> OUT4
    MASTRA --> OUT5
    
    %% LINEé€šçŸ¥
    LAMBDA -.->|Webhook| LINE
    OUT1 -.->|é€šçŸ¥| LINE
    OUT2 -.->|é€šçŸ¥| LINE
    OUT3 -.->|é€šçŸ¥| LINE
    OUT4 -.->|é€šçŸ¥| LINE
    OUT5 -.->|é€šçŸ¥| LINE
    OUT6 -.->|é€šçŸ¥| LINE
    OUT7 -.->|é€šçŸ¥| LINE
    
    LINE -.->|é…ä¿¡| USER
    
    %% ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
    classDef userStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef awsStyle fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef mastraStyle fill:#f3e5f5,stroke:#9c27b0,stroke-width:3px
    classDef agentStyle fill:#e1bee7,stroke:#9c27b0,stroke-width:2px
    classDef toolStyle fill:#f8bbd0,stroke:#e91e63,stroke-width:1px
    classDef aiStyle fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    classDef dataStyle fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    classDef externalStyle fill:#f5f5f5,stroke:#757575,stroke-width:2px
    classDef outputStyle fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    
    class USER userStyle
    class ALB,APIGW,LAMBDA,STEP awsStyle
    class MASTRA mastraStyle
    class AGENT1,AGENT2,AGENT3 agentStyle
    class TOOL1A,TOOL1B,TOOL1C,TOOL2A,TOOL2B,TOOL2C,TOOL3A,TOOL3B,TOOL3C toolStyle
    class BEDROCK aiStyle
    class DYNAMO,S3 dataStyle
    class LINE,WEATHER,GRANTS,MARKET,PROPERTY,CANVA,GSLIDES externalStyle
    class OUT1,OUT2,OUT3,OUT4,OUT5,OUT6,OUT7 outputStyle
        </div>
        
        <div class="tech-note">
            <h3>æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´</h3>
            <ul>
                <li><strong>Mastraãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</strong>: è¤‡æ•°ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ãã®ãƒ„ãƒ¼ãƒ«ã‚’çµ±åˆç®¡ç†</li>
                <li><strong>Claude Opus 4 (Amazon Bedrock)</strong>: å…¨ã¦ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§é«˜åº¦ãªè‡ªç„¶è¨€èªå‡¦ç†ã‚’å®Ÿç¾</li>
                <li><strong>ãƒ„ãƒ¼ãƒ«é§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</strong>: å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå°‚é–€çš„ãªãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã—ã¦ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’ç”Ÿæˆ</li>
                <li><strong>å¤–éƒ¨APIé€£æº</strong>: å„ãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ã«å¿œã˜ã¦å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨é€£æº</li>
            </ul>
        </div>
        
        <div class="agent-tools">
            <div class="agent-card">
                <h4>ğŸ  Agent 1: ç©ºãå®¶ãƒ»æ°‘æ³Šã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼</h4>
                <strong>ãƒ„ãƒ¼ãƒ«:</strong>
                <ul>
                    <li>ç‰©ä»¶æ¤œç´¢ãƒ„ãƒ¼ãƒ«</li>
                    <li>åœ°åŸŸæƒ…å ±åé›†ãƒ„ãƒ¼ãƒ«</li>
                    <li>ä¾¡æ ¼åˆ†æãƒ„ãƒ¼ãƒ«</li>
                </ul>
                <strong>ç”Ÿæˆç‰©:</strong> ç§»ä½æº–å‚™ã‚µãƒãƒ¼ãƒˆè³‡æ–™
            </div>
            
            <div class="agent-card">
                <h4>ğŸ’° Agent 2: è£œåŠ©é‡‘ãƒ»åŠ©æˆé‡‘ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼</h4>
                <strong>ãƒ„ãƒ¼ãƒ«:</strong>
                <ul>
                    <li>è£œåŠ©é‡‘æ¤œç´¢ãƒ„ãƒ¼ãƒ«</li>
                    <li>ç”³è«‹æœŸé™ç®¡ç†ãƒ„ãƒ¼ãƒ«</li>
                    <li>ç”³è«‹æ›¸ä½œæˆãƒ„ãƒ¼ãƒ«</li>
                </ul>
                <strong>ç”Ÿæˆç‰©:</strong> è£œåŠ©é‡‘ãƒªã‚¹ãƒˆã€ç”³è«‹æ›¸é¡
            </div>
            
            <div class="agent-card">
                <h4>ğŸ“Š Agent 3: Agri-Pitch AI</h4>
                <strong>ãƒ„ãƒ¼ãƒ«:</strong>
                <ul>
                    <li>å¸‚å ´åˆ†æãƒ„ãƒ¼ãƒ«</li>
                    <li>ã‚¹ãƒ©ã‚¤ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«</li>
                    <li>ãƒ—ãƒ¬ã‚¼ãƒ³æœ€é©åŒ–ãƒ„ãƒ¼ãƒ«</li>
                </ul>
                <strong>ç”Ÿæˆç‰©:</strong> è²©è·¯æ‹¡å¤§ãƒ—ãƒ¬ã‚¼ãƒ³ã€ä½œä»˜è¨ˆç”»
            </div>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 50,
                rankSpacing: 80
            }
        });
    </script>
</body>
</html> 